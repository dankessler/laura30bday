What You See May Not Be What You Get:
UCB Bandit Algorithms Robust to Œµ-Contamination

arXiv:1910.05625v2 [stat.ML] 24 Feb 2020

Laura Niss, Ambuj Tewari
University of Michigan

Abstract
Motivated by applications of bandit algorithms in education, we consider a stochastic multi-armed bandit problem
with Œµ-contaminated rewards. We allow an adversary to
give arbitrary unbounded contaminated rewards with full
knowledge of the past and future. We impose the constraint that for each time t the proportion of contaminated
rewards for any action is less than or equal to Œµ. We derive
concentration inequalities for two robust mean estimators
for sub-Gaussian distributions in the Œµ-contamination context. We define the Œµ-contaminated stochastic bandit problem and use our robust mean estimators to give two variants of a robust Upper Confidence Bound (UCB) algorithm, crUCB. Using regret derived from only the underlying
‚àö stochastic rewards, both variants of crUCB achieve
O( KT log T ). Our simulations are designed to reflect
reasonable settings a teacher would experience when implementing a bandit algorithm. We show that in certain
adversarial regimes crUCB not only outperforms algorithms designed for stochastic (UCB1) and adversarial bandits (EXP3) but also those that have ‚Äúbest of both worlds‚Äù
guarantees (EXP3++ and TsallisInf) even when our constraint on the proportion of contaminated rewards is broken.

1

INTRODUCTION

We first review the problem of stochastic multi-armed bandits (sMAB) with contaminated rewards, or contaminated
stochastic bandits (CSB). This scenario assumes that rewards associated with an action are sampled i.i.d. from a
fixed distribution and that the learner observes the reward
after an adversary has the opportunity to contaminate it.
The observed reward can be unrelated to the reward distribution and can be maliciously chosen to fool the learner.
An outline for this setup is presented in Section 2.
We are primarily motivated by the use of bandit algorithms in education, where the rewards often come directly from human opinion. Whether responses come from
1

undergraduate students, a community sample, or paid participants on platforms like MTurk, there is always reason
to believe some responses are careless or inattentive to
the question or could be assisted by bots (Curran, 2016;
Necka et al., 2016).
An example in education is a recent paper testing bandit Thompson sampling to identify high quality student
generated solution explanations to math problems using
MTurk participants (Williams et al., 2016). Using a rating
between 1-10 from 150 participants, the results showed
that Thompson sampling identified participant generated
explanations that when viewed by other participants significantly improved their chance of solving future problems compared to no explanation or ‚Äúbad‚Äù explanations
identified by the algorithm. While the proportion of contaminated responses will always depend on the population, recent work suggests when already using checks for
fraudulent participants, between 2‚àí30% of MTurk participants give low-quality samples (Ahler, Roush, and Sood,
2019; Necka et al., 2016; Ryan, 2018). This is consistent
with measurements of careless and inattentive responses
seen in survey data, which reports 1 ‚àí 30% with an estimated mode of 8‚àí12%, with the conclusion that these responses are generally not a random sample (Curran, 2016).
Accounting for these low quality responses is especially
relevant in educational setting where the number of iterations an algorithm can run is often significantly smaller
than those used by big tech (e.g. advertising).
Recent work in CSB has various assumptions on the
adversary, the contamination, and the reward distributions.
Many papers require the rewards and contamination to be
bounded (Gupta, Koren, and Talwar, 2019; Kapoor, Patel, and Kar, 2018; Lykouris, Mirrokni, and Leme, 2018).
Others don‚Äôt require boundedness, but do assume that the
adversary contaminates uniformly across rewards (Altschuler,
Brunel, and Malek, 2019). All works make some assumption on the number of rewards for an action an adversary
can contaminate. We discuss previous work more thoroughly in section 3.
Our work expands on these papers by allowing for a

full knowledge adaptive adversary that can give unbounded
contamination in any manner. However, there is a trade
off when compared to work assuming bounded rewards
and contamination: we require an estimate of the upper
bound on the reward variance. This can often allow for
simpler implementation than some algorithms that require
boundedness, as we will discuss in section 4. Our constraint on the adversary is that for some fixed Œµ, no more
than Œµ proportion of rewards for an action are contaminated. We provide a Œµ-contamination robust UCB algorithm by first proving concentration inequalities for two
robust mean estimators in the Œµ-contamination context.
We are able to show that the regret of our algorithm
anap
lyzed on the true reward distributions is O( KT log T )
provided that the contamination proportion is small enough.
Through simulations, we show that with a Bernoulli adversary, our algorithm outperforms algorithms designed
for stochastic (UCB1) and adversarial bandits (EXP3) as
well as those that have ‚Äúbest of both worlds‚Äù guarantees
(EXP3++ and TsallisInf) even when our constraint on the
adversary is broken.
Though we are motivated by of bandit algorithms applications in education and use this context to determine
appropriate parameters in the simulations, we point out
opportunities for CSB modeling to arise in other contexts
as well.

2

PROBLEM SETTING

Here we specify our notation and present the Œµ-contaminated
stochastic bandit problem. We then argue for a specific
notion of regret for CSB. We compare our setting to others current in the field in section 3.
Notation We use [K] to represent {1, ..., K} for K ‚àà R
to represent the number of actions and the indicator function I{¬∑} to be 1 if true and 0 otherwise. Let Na (t) be
the number of times action a has been chosen at time t
and xa (t) = {xa (1), ..., xa (Na (t))} to be the vector of
all observed rewards for action a at time t. The suboptimality gap for action a is ‚àÜa and we define ‚àÜmin =
mina‚àà[K] ‚àÜa .

2.1 Œµ-CONTAMINATED STOCHASTIC BANDITS

A basic parameter in our framework is Œµ, the fraction of
rewards for an action that the adversary is allowed to contaminate. Before play, the environment picks a true reward ra (t) ‚àº Da from fixed distribution Da for all a ‚àà
[K] and t ‚àà [T ]. The adversary observes these rewards
and then play begins. At time t = 1, 2, ..., T the learner
chooses an action At ‚àà [K] . The adversary sees At then
chooses an observed reward xAt (t) and then the learner
observes only xAt (t).
Human feedback: There is always a chance that huWe present the contaminated stochastic bandits game
man feedback is careless or inattentive, and therefore is in algorithm 1.
not representative of the underlying truth related to an action. This may appear in online surveys that are used for
Algorithm 1: Contaminated Stochastic Bandits
A/B testing, or as is the case above in the explanation geninput: Number of actions K, time horizon T .
eration example.
fix : ra (t) ‚àÄa ‚àà [K], t ‚àà [T ].
Adversary observes fixed rewards.
for t = 1, ..., T do
Click fraud: Internet users who wish to preserve priLeaner picks action At ‚àà [K].
vacy can intentionally click on ads to obfuscate their true
Adversary observes At and chooses xAt (t).
interests either manually or through browser apps. SimLearner observes xAt (t).
ilarly, malware can click on ads from one company to
end
falsely indicate high interest, which can cause higher rankings in searches or more frequent use of the ad than it
would otherwise merit (Crussell, Stevens, and Chen, 2014;
We allow the adversary to corrupt in any fashion as
Pearce et al., 2014).
long as for every time t there is no more than an Œµ-fraction
of contaminated rewards for any action. That is, we constrain the adversary such that,
Measurement errors: If rewards are gathered through
Na (t)
X
some process that may occasionally fail or be inaccurate,
‚àÄa
‚àà
[K],
‚àÄt
‚àà
[T
],
I{ra (i) 6= xa (i)} ‚â§ Œµ ¬∑ Na (t).
then the rewards may be contaminated. For example, in
i=1
health apps that use activity monitors, vigorous movement
of the arms may be perceived as running in place (Bai et We allow the adversary to give unbounded contamination
al., 2018; Feehan et al., 2018).
that can be chosen with full knowledge of the learner‚Äôs
2

history as well as current and future rewards. This setting
allows the adversary to act differently across actions and
place no constraints on the contamination itself, but rather
the rate of contamination.

2.2

rewards such that the learner cannot achieve sublinear worstcase regret (Lattimore, 2018). Algorithms such as EXP3
(Auer, NicoloÃÄ Cesa-Bianchi, et al., 2002) are thus randomized, but their regret is analysed with respect to the
best fixed action where ‚Äúbest‚Äù is defined using the observed rewards. There are no theoretical guarantees with
respect to the uncontaminated regret, so it is not immediately clear how they will perform in a CSB problem.
We remark that adversarial analysis assumes uniformly
bounded observed rewards whereas we allow observed rewards to be unbounded. Additionally, the general adversarial framework does not take advantage of the structure
present in CSB, namely that the adversary can only corrupt a small fraction of rewards, so it likely that performance improvements can be make.

NOTION OF REGRET

A traditional goal in bandit learning is to minimize the
observed cumulative regret gained over the total number
of plays T . Because the adversary in this model can affect
the observed cumulative regret, we argue to instead use
a notion of regret that considers only the underlying true
rewards. We call this uncontaminated regret and give the
definition below for any time T and policy œÄ in terms of
the true rewards r,
X

T
T
X
RÃÑT (œÄ) = max E
ra (t) ‚àí
rAt (t) .
a‚àà[K]

t=1

(2.1)

3.2

A developing line of work is algorithms that enjoy ‚Äúbest
of both worlds‚Äù guarantees. That is, they perform well
in both stochastic and adversarial environments without
knowing a priori which environment they will face. Early
work in this area Auer and Chiang, 2016; Bubeck and
Slivkins, 2012 started by assuming a stochastic environment and implementing some method to detect a failure of
the i.i.d. assumption, at which point the algorithm switches
to an algorithm for the adversarial environment for the
remainder of iterations. Further work implements algorithms that can handle an environment that is some mixture of stochastic and adversarial, as in EXP3++ and TsallisInf (Seldin and Slivkins, 2014; Zimmert and Seldin,
2019).
While these algorithms are aimed well for a stochastic
environment with some adversarial rewards, they differ
from contamination robust algorithms in that all observed
rewards are thought to be informative. Therefore, their
uncontaminated regret has not been analysed and there are
no guarantees in the CSB setting.

This definition eq. (2.1) is first mentioned in Kapoor, Patel, and Kar, 2018 along with another notion of regret
that compares the sum of the observed (possibly contaminated) rewards to the sum of optimal, uncontaminated rewards,

X
T
T
X
xAt (t) .
ra (t) ‚àí
RÃÑT (œÄ) = max E
a‚àà[K]

t=1

(2.2)

t=1

We argue that eq. (2.2) gives little information about the
performance of an algorithm. This notion of regret can
be negative, and with no bounds on the contamination it
can be arbitrarily small and potentially meaningless. We
believe that any regret that compares a true component
to an observed (possibly contaminated) component is not
a useful measure of performance in CSB as it is unclear
what regret an optimal strategy should produce.

3

BEST OF BOTH WORLDS

t=1

RELATED WORK

We start by briefly addressing why adversarial and ‚Äúbest 3.3 CONTAMINATION ROBUST STATISof both world‚Äù algorithms are not optimized for CSB. We
TICS
then cover relevant work in robust statistics, followed by
current work in robust bandits and how our model differs The Œµ-contamination model we consider is closely related
to the one introduced by Huber in 1964 (Huber, 1964).
and relates.
Their goal was to estimate the mean of a Gaussian mixture model where Œµ fraction of the sample was not sam3.1 ADVERSARIAL BANDITS
pled from the main Gaussian component. There has been
Adversarial bandits with an oblivious environment allows a recent increase of work using this model, especially in
the adversary to first look at the learners policy and then extensions to the high-dimensional case (Diakonikolas et
choose all rewards before the game begins. If the learner al., 2019, Kothari, Steinhardt, and Steurer, 2018, Lai, Rao,
chooses a deterministic policy, the adversary can choose and Vempala, 2016, L. Liu, Li, and Caramanis, 2019).
3

These works often keep the assumption of a Gaussian retical guarantees and simulations of the affects an advermixture component, though there has been expanding work sary can have on these two algorithms when the adversary
with non-Gaussian models as well.
does not know the optimal action but is otherwise fully
adaptive. They show these standard algorithms are susceptible to contamination. Similar work looks at contami3.4 CONTAMINATION ROBUST BANDITS nation in contextual bandits with a non-adaptive adversary
(Ma et al., 2019).
Some of the first work in CSB started by assuming both
rewards and contamination were bounded (Gupta, Koren,
and Talwar, 2019; Lykouris, Mirrokni, and Leme, 2018). 4 MAIN RESULTS
These works assume an adversary that can contaminate at
any time step, but that is constrained in the cumulative We present concentration bounds for both the Œ±-shorth
contamination. That is, the cumulative absolute differ- and Œ±-trimmed mean estimators in the Œµ-contamination
ence of the contaminated
reward, x, to the true reward, context for sub-Gaussian random variables.
P
r, is bounded, |rAt (t) ‚àí xAt (t)| ‚â§ C. Lykouris et. al.
Our contribution to the CSB problem is in providing
provides a layered UCB-type active arm elimination al- a contamination robust UCB algorithm that is simple to
gorithm. Gupta expands on this work to provide an algo- implement and has theoretical regret guarantees close to
rithm similar to active arm elimination in spirit, but which those of UCB algorithms in the uncontaminated setting.
never completely eliminates an action, and which has better regret guarantees.
Recent work in implementing a robust UCB replaces 4.1 CONTAMINATION ROBUST MEAN ESthe empirical mean with the empirical median, and gives
TIMATORS
guarantees for the uncontaminated regret with Gaussian
rewards (Kapoor, Patel, and Kar, 2018). They consider The estimators we analyse have been in use for many
an adaptive adversary but require the contamination to be decades as robust statistics. Our contribution is to anabounded, though the bound need not be known. They cite lyze them within our Œµ-contamination model and provide
work that can expand their robust UCB to distributions simple finite-sample concentration inequalities for ease of
with bounded fourth moments by using the agnostic mean use in UCB-type algorithms.
(Lai, Rao, and Vempala, 2016), though give no uncontaminated regret guarantees. In one dimension, the agnostic 4.1.1 Trimmed Mean
mean takes the mean of the smallest interval containing
(1 ‚àí Œµ) fraction of points. This estimator is also known Our first estimator suggested for use in the contaminated
as the Œ±-shorth mean. Our work expands on this model model is the Œ±-trimmed mean (L. Liu, Li, and Caramanis,
by allowing for unbounded contamination and analysing 2019).
the uncontaminated regret for sub-Gaussian rewards when
implementing a UCB algorithm with the Œ±-shorth mean. Œ±-trimmed mean Trim the smallest and largest Œ±-fraction
CSB has also been analysed in the best arm identi- of points from the sample and calculate the mean of the
fication problem (Altschuler, Brunel, and Malek, 2019). remaining points. This estimator uses 1 ‚àí 2Œ± fraction of
Using a Bernoulli adversary that contaminates any reward sample points.
with probability Œµ, Altschuler et. al. consider three adversaries of increasing power, from the oblivious adversary,
Algorithm 2: Œ±-Trimmed Mean
which does not know the player‚Äôs history nor the current
input : Xn = (x1 , ..., xn ), Œ±
action or reward, to a malicious adversary, which can conoutput: Œ±-trimmed mean
taminate knowing the player‚Äôs history and the current ac(x(1) , ..., x(n) ) = sorted Xn s.t. x(i) ‚â§ x(i+1)
tion and reward. They give analysis of the probability of
cut = dŒ± ‚àó ne
best arm selection and sample complexity of an active arm
return mean(x(cut) , ..., x(n-cut) )
elimination algorithm. While their performance measure
is different than ours, we generalize their context to allow
an adversary to contaminate in any fashion.
The intuition being if the contamination is large, then
There is also work that explores adaptive adversarial it will be removed from the sample. If it is small, it should
contamination on Œµ-greedy and UCB algorithms (Jun et have little affect on the mean estimate. Next we provide
al., 2018). They give a thorough analysis with both theo- the concentration inequality for the Œ±-trimmed mean.
4

Theorem 1 (Trimmed mean concentration). Let G be the with probability at least 1 ‚àí Œ¥1 ‚àí Œ¥2 . Letting Œ¥1 = t22 and
set of points x1 , ...xn ‚àà R that are drawn from a œÉ-sub- Œ¥2 = t22 , and assuming Œ± ‚â• Œµ, we have,
Gaussian distribution with mean ¬µ. Let Sn be a sample
where an Œµ-fraction of these points are contaminated by
|trMeanŒ± (Sn ) ‚àí ¬µ|
r

an adversary. For Œµ ‚â§ Œ± < 1/2, t ‚â• n we have,
p
4
œÉ
‚â§
log(t) + 4Œ± 6 log(t)
(1 ‚àí 2Œ±)
n
|trMeanŒ± (Sn ) ‚àí ¬µ| ‚â§

r
p
4
œÉ
log(t) + 4Œ± 6 log(t)
(1 ‚àí 2Œ±)
n
with probability at least 1 ‚àí t42 .
with probability at least 1 ‚àí t42 .
Proof. Our proof techniques are adapted from L. Liu, Li,
and Caramanis, 2019.
Let Gn be the set of points xi , ...xn ‚àà R that are
drawn from a œÉ-sub-Gaussian distribution. Without loss
of generality assume ¬µ = 0. Let Sn be a sample where an
Œµ-fraction of these points are contaminated by an adversary.
Let GÃÉ ‚äÇ Gn represent the points which are not contaminated and C ‚äÇ Gn represent the contaminated points.
Then our sample can be represented by the union Sn =
GÃÉ ‚à™ C. Let R represent the points that remain after trimming Œ± fraction of the largest and smallest points, and T
be the set of points that were trimmed. Then we have,

A more detailed proof can be found in appendix A.1
4.1.2

Lai‚Äôs (2016) agnostic mean, which we use the more common term Œ±-shorth mean for, can be considered a variation of the trimmed mean.
Œ±-shorth mean Take the mean of the shortest interval
that removes the smallest Œ¥1 and largest Œ¥2 fraction of
points such that Œ¥1 + Œ¥2 = Œ±, where Œ¥1 , Œ¥2 are chosen
to minimize the interval length of remaining points. Uses
1 ‚àí Œ± fraction of sample points.
The Œ±-shorth mean is less computationally efficient
than the trimmed mean, but may be a better mean estimator when the contaminated points are not large outliers
and are skewed in one direction. Intuitively this is because
the Œ±-shorth mean can trim off contamination that would
require removing most of the sample with the trimmed
mean. Next we provide the concentration inequality for
the Œ±-shorth mean.

X
1
x
(1 ‚àí 2Œ±)n

|trMeanŒ± (Sn )| =

x‚ààR

1
‚â§
(1 ‚àí 2Œ±)n

 X

x +

X

x +

X


x

x‚ààGÃÉ

x‚ààGÃÉ‚à©T

x‚ààC‚à©R

| {z }

| {z }

| {z }

A1

A2

A3

with
A1 ‚â§

X

X

x +

x‚ààGn

x
Algorithm 3: Œ±-Shorth Mean
input : Xn = (x1 , ..., xn ), Œ±
output: A mean estimate for the distribution of X
(x(1) , ..., x(n) ) = sorted Xn s.t. x(i) ‚â§ x(i+1)
nŒ± = b(1 ‚àí Œ±) ‚àó nc
I ‚àà argmink {x(k+nŒ± ) ‚àí x(k) }
Choose uniformly at random from set I if there is
more than one starting index with the smallest
interval length
return sMean(X) ‚Üê mean(x(I) , ..., x(I+nŒ± ) )

x‚ààGn \GÃÉ

‚â§ n|xÃÑGn | + Œµn| max xi |
i‚àà[n]

w.p. at least 1 ‚àí Œ¥1 ‚àí Œ¥2 ,

A2 ‚â§ 2Œ±n max |xi |

w.p. at least 1 ‚àí Œ¥2 ,

A3 ‚â§ Œµn max |xi |

w.p. at least 1 ‚àí Œ¥2 .

i‚àà[n]

i‚àà[n]

Shorth Mean

Combining we get,
|trMeanŒ± (Sn ) ‚àí ¬µ|


1
|xÃÑGn | + max |xi |(2Œµ + 2Œ±)
(1 ‚àí 2Œ±)
i‚àà[n]


1
|xÃÑGn | + max |xi |(4Œ±)
‚â§
(1 ‚àí 2Œ±)
i‚àà[n]
r
r

œÉ
2
2
2t
‚â§
log
+ 4Œ± 2 log
(1 ‚àí 2Œ±)
n
Œ¥1
Œ¥2
‚â§

Theorem 2 (Œ±-shorth mean concentration). Let Gn be the
set of points x1 , ...xn ‚àà R that are drawn from a œÉ-subGaussian distribution with mean ¬µ. Let Sn be a sample
where an Œµ-fraction of these points are contaminated by
5

‚àÜmin‚àö
Œµ ‚â§ Œ± ‚â§ 4(‚àÜ +4œÉ
, we have the uncontamimin
0 6 log T )
nated regret bound,

an adversary. For Œµ ‚â§ Œ± < 1/3, t ‚â• n, we have,
|sMeanŒ± (Sn ) ‚àí ¬µ| ‚â§
r
4
(6Œ± ‚àí 8Œ±2 )œÉ p
œÉ
log t +
6 log t
1 ‚àí 2Œ± n
(1 ‚àí 2Œ±)(1 ‚àí Œ±)
with probability at least 1 ‚àí

RÃÑ(U CB) ‚â§ 8œÉ0

KT log T +

X

15‚àÜa .

4
t2 .

Corollary 1 (Œ±-trimmed mean crUCB uncontaminated regret bounded rewards). If the rewards are bounded by b,
min
and have contamination rate Œµ ‚â§ Œ± ‚â§ 4(‚àÜ‚àÜmin
+4b) , then

Proof is contained in the appendix and follows a similar approach as shown for the trimmed mean.
Our methods ensured that the first term in each concentration bound is the same, giving them similar regret
guarantees when implemented in a UCB algorithm. We
emphasize that the Œ±-shorth mean uses 1 ‚àí Œ± fraction of a
sample while the Œ±-trimmed mean uses 1 ‚àí 2Œ± fraction of
a sample. We remark that if there is no contamination and
Œ± = 0 then our inequalities reduce to the standard concentration inequality for the empirical mean of samples
drawn from a sub-Gaussian distribution.

4.2

p

RÃÑT ‚â§ 8œÉ0

p

KT log(T ) +

X

15‚àÜa .

Theorem 4 (Œ±-shorth mean crUCB uncontaminated regret). Let K > 1 and T ‚â• K ‚àí 1. Then with algorithm
4 with the Œ±-shorth mean, sub-Gaussian reward distributions with œÉa ‚â§ œÉ0 , and contamination rate Œµ ‚â§ Œ± ‚â§
‚àÜmin‚àö
, we have the uncontaminated regret
4(‚àÜmin +9œÉ0 6 log T )
bound,

CONTAMINATION ROBUST UCB

We present the contamination robust-UCB (crUCB) algorithm for Œµ-CSB with sub-Gaussian rewards.

RÃÑ(U CB) ‚â§ 8œÉ0

Algorithm 4: crUCB
input: number of actions K, time horizon T , upper
bound on fraction contamination Œ±, upper
bound on sub-Gaussian constant œÉ0 , mean
estimate function (Œ± trimmed or shorth
mean) f .
for t ‚â§ K do
Pick action a when t = a.
end
for t > K do
for a ‚àà [K] compute do
f (xa (t)) ‚Üê mean estimate of rewards.
Na (t) ‚Üê number of times action has been
played.
end
Pick action At =
q

log(t)
œÉ0
4N
.
argmaxa‚àà[K] f (xa (t)) + (1‚àí2Œ±)
a (t)

p

KT log T +

X

15‚àÜa .

Corollary 2 (Œ±-shorth mean crUCB uncontaminated regret bounded rewards). If the rewards are bounded by b,
min
and have contamination rate Œµ ‚â§ Œ± ‚â§ 4(‚àÜ‚àÜmin
+9b) , then
RÃÑT ‚â§ 8œÉ0

p

KT log(T ) +

X

15‚àÜa .

Proofs for theorem 3 and 4 and their corollaries follow
standard analysis and are provided in appendix A.5.
From theorem 3 and 4 we get that crUCB has the same
order of regret in the CSB setting as UCB1 has in the standard sMAB setting. The constraint on the magnitude of Œµ
is quite strong, but we show in section 5 that they can be
broken and still obtain good empirical performance.

Remark Our bounds above do not allow Œµ to be too big
relative to the minimum suboptimality gap ‚àÜmin . This
is natural: if Œµ > ‚àÜmin then no algorithm can get sublinear regret since distinguishing between the top two acObserve reward xAt (t).
tions is statistically impossible even with infinite samples.
end
We give a simple example in appendix B. Furthermore,
‚àö
it is possible to derive a regret bound1 of OÃÉ(œÉ0 KT +
Œ±œÉ0
We provide uncontaminated regret guarantees for crUCB 1‚àí4Œ±
T ) for any choice of Œ± such that Œµ ‚â§ Œ± < 1/4. The
below for both the Œ±-trimmed and the Œ±-shorth mean.
linear term in regret (which is unavoidable for large Œµ)
Theorem 3 (Œ±-trimmed mean crUCB uncontaminated re- may be acceptable if the corruption proportion is not very
gret). Let K > 1 and T ‚â• K ‚àí 1. Then with algo- large.
1 The OÃÉ(¬∑) notation hides constants and logarithmic terms. See aprithm 4 with the Œ±-trimmed mean, œÉ-sub-Gaussian reward distributions with œÉa ‚â§ œÉ0 , and contamination rate pendix B for details.

6

5

SIMULATIONS

We compare our crUCB algorithms using the trimmed
mean (tUCB) and shorth mean (sUCB) against a standard stochastic algorithm (UCB1, Auer and Nicolo CesaBianchi, 2002), a standard adversarial algorithm (EXP3,
Auer, NicoloÃÄ Cesa-Bianchi, et al., 2002), two ‚Äúbest of
both worlds‚Äù algorithms (EXP3++, Seldin and Lugosi,
2017, 0.5-TsallisInf, Zimmert and Seldin, 2019), and another contamination robust algorithm (RUCB-MAB, Kapoor,
Patel, and Kar, 2018). Each trial has five actions (K = 5),
is run for 1000 iterations (T = 1000), for Œµ ‚àà {0.05, 0.1}.
For sUCB and tUCB, we set Œ± = Œµ and œÉ0 = œÉ. The plots
are average results over 10 trials with error bars showing
the standard deviation.
Our choice of T comes from our motivation to apply
contaminated bandits in education, where the sample sizes
are often much smaller than for example in advertising.
While T = 1000 would be considered a large university
class, it still allows one to visually see regret for smaller
iterations and see how performance stabilizes. We similarly chose number K of arms and proportion contamination Œµ to be in a realistic range for the application we have
in mind. All algorithms use recommended parameter settings given within their respective papers.

(a) Œµ = 0

(b) Œµ = 0.05

Rewards and gaps We chose the reward distribution to
be binomial(n=10) to simulate likert scale and because
this distribution has bounded rewards and is not symmetric for large p. For the optimal action, p = .9 and for
suboptimal actions p = .8, thus the suboptimality gap is
‚àÜ = 1. All non-optimal actions have the same true distribution.
Adversaries We focus on a Bernoulli adversary which
gives a contaminated reward at every time step with probability Œµ. We also implement a cluster adversary which
contaminates at the beginning of play to show the weakness of algorithms to this type of attack.

(c) Œµ = 0.1

Contamination We use a random contamination scheme Figure 1: Binomial Rewards With Varying Proportion Of
which chooses a contaminated reward uniformly from rangesContamination
that increase suboptimal action means and decrease the
optimal action‚Äôs mean.
the UCB type algorithms. In fig. 1, we see the best of
Performance measurement We plot the average regret these, TsallisInf, starts to degrade as the proportion of
contamination increases while the robust UCB algorithms
over 10 trials for 1000 iterations.
are only slightly affected. These simulations show a clear
We recommend to view the plots on a color screen.
In fig. 1a we see that the adversarial and best of both performance benefit to using algorithms that specifically
worlds algorithms, EXP3, EXP3++, and TsallisInf, per- account for contaminated rewards.
Figure 3 and fig. 4 shows that for both sUCB and
form poorly in the purely stochastic setting compared to
7

(a) Œ± = 0

(a) sUCB

(b) Œ± = 0.05

(b) tUCB

Figure 3: Regret Sensitivity For Œ±.

To look at the impact of using a contamination robust
algorithm when there is no contamination, we plotted various Œ± values when Œµ = 0, shown in fig. 2. Assuming
small amounts of contamination when there is none only
has a small impact on performance, suggesting it is permissible to use contamination robust methods when there
is uncertainty of contamination. Similarly, small K and
large ‚àÜ can render bounded contamination impotent and
would not require algorithms that account for it.
We have included RUCB-MAB in our simulations because it is simple to implement and can perform similarly
well to our algorithms. We note it currently has guarantees only for Gaussian rewards (Kapoor, Patel, and Kar,
2018).
Figure 5 shows the poor performance of all algorithms
when the first Œµ rewards are contaminated. TsallisInf and
EXP3++ show some recovery, but it is clear this type of
adversary is harmful. This remains an open problem for
scenarios with small T .
We also considered including the BARBAR algorithm
(Gupta, Koren, and Talwar, 2019) whose epoch scheme is

(c) Œ± = 0.1

Figure 2: Misspecified Œ± For Œµ = 0.

tUCB, the choice of Œ± is much less sensitive than choice
of œÉ. Over estimating or slightly underestimating Œ± does
not degrade performance significantly. Underestimating œÉ
can give a significant boost to performance while over estimating can degrade it. This is consistent with the performance of UCB algorithms in practice, which often scale
the exploration term to improve empirical performance
(Y.-E. Liu et al., 2014).
8

6

DISCUSSION

We have presented two variants of an Œµ-contamination robust UCB algorithm to handle uninformative or malicious
rewards in the stochastic bandit setting. As the main contribution, we proved concentration inequalities for the Œ±trimmed and Œ±-shorth mean in the Œµ-contamination setting and guarantees on the uncontaminated regret of the
crUCB algorithms. The regret guarantees are similar to
those in the uncontaminated sMAB setting.
We have shown through simulation that these algorithms can outperform ‚Äúbest of both worlds‚Äù algorithms
and those for stochastic or adversarial environments when
using a small number of iterations and Œµ chosen to be reasonable when implementing bandits in education.
We highlight that our algorithms are simple to implement. In practice, it is often easy to find upper bounds on
the parameters which are robust to underestimation. Our
algorithms are numerically stable and have clear intuition
to their actions.
A weak point of these algorithms is they require knowledge of Œ± before hand. Choices of Œ± may come from domain knowledge, but could also require a separate study.
In this work we assumed a fully adaptive adversarial
contamination, constrained only by the total fraction of
contamination at any time step. By making more assumptions about the adversary, it is likely possible to improve
uncontaminated regret bounds.

(a) sUCB

(b) tUCB

Figure 4: Regret Sensitivity For œÉ.

Limitations The adversary used in the simulation is quite
simple and does not take full advantage of the power we
allow in our model. We designed it as a first test of our
algorithms and associated theory. In the future, we would
like to design simulated adversaries that are modeled on
real world contamination. It will also be important to deploy contamination robust algorithms in the real world.
This will require thought on how to select various tuning
parameters ahead of the deployment.
There remain many open questions in this area. In
particular, we think this work could be improved by
(a) Œµ = .1

Randomized algorithms UCB-type algorithms are often outperformed in applications by the randomized Thompson sampling algorithm. Creating a randomized algorithm
that accounts for the contamination model would increase
the practicality of this line of work.

Figure 5: Front Cluster Attack

the only algorithm we know that accounts for the front
cluster attack. We chose against this as for our setting of
T = 1000 the BARBAR algorithm only has one epoch, Contamination correlated with true rewards One posand thus does not make any updates to the estimated gaps, sibility is that the contaminated rewards contain informaresulting in pure exploration.
tion of the true rewards. For example if contamination can
9

be missing data, we know dropout can be correlated with Feehan, Lynne M et al. (2018). ‚ÄúAccuracy of Fitbit Dethe treatment condition.
vices: Systematic Review and Narrative Syntheses of
Quantitative Data‚Äù. In: JMIR mHealth and uHealth
6.8, e10527.
Acknowledgements
Gupta, Anupam, Tomer Koren, and Kunal Talwar (2019).
L.N. acknowledges the support of NSF via grant DMS‚ÄúBetter Algorithms for Stochastic Bandits with Ad1646108 and thanks Joseph Jay Williams for helpful disversarial Corruptions‚Äù. In: Conference on Learning Thecussions and for inspiring this work. A.T. would like to
ory, pp. 1562‚Äì1578.
acknowledge the support of a Sloan Research Fellowship Huber, Peter (1964). ‚ÄúRobust Estimation of a Location
and NSF grant CAREER IIS-1452099.
Parameter‚Äù. In: The Annals of Mathematical Statistics
35.1, pp. 73‚Äì101.
References
Jun, Kwang-Sung et al. (2018). ‚ÄúAdversarial attacks on
stochastic bandits‚Äù. In: Advances in Neural InformaAhler, Douglas J, Carolyn E Roush, and Gaurav Sood
tion Processing Systems, pp. 3640‚Äì3649.
(2019). ‚ÄúThe micro-task market for lemons: Data qualKapoor, Sayash, Kumar Kshitij Patel, and Purushottam
ity on Amazon‚Äôs Mechanical Turk‚Äù. In: Meeting of the
Kar (2018). ‚ÄúCorruption-Tolerant Bandit Learning‚Äù.
Midwest Political Science Association.
In: Machine Learning, pp. 1‚Äì29.
Altschuler, Jason, Victor-Emmanuel Brunel, and Alan Malek
Kothari, Pravesh K, Jacob Steinhardt, and David Steurer
(2019). ‚ÄúBest Arm Identification for Contaminated Ban(2018). ‚ÄúRobust moment estimation and improved clusdits‚Äù. In: Journal of Machine Learning Research 20,
tering via sum of squares‚Äù. In: Proceedings of the 50th
pp. 1‚Äì39.
Annual ACM SIGACT Symposium on Theory of ComAuer, Peter and Nicolo Cesa-Bianchi (2002). ‚ÄúFinite-Time
puting, pp. 1035‚Äì1046.
Analysis of the Multiarmed Bandit Problem‚Äù. In: MaLai, K. A., A. B. Rao, and S. Vempala (2016). ‚ÄúAgnostic
chine learning, p. 22.
Estimation of Mean and Covariance‚Äù. In: 2016 IEEE
Auer, Peter, NicoloÃÄ Cesa-Bianchi, et al. (2002). ‚ÄúThe Non57th Annual Symposium on Foundations of Computer
stochastic Multiarmed Bandit Problem‚Äù. In: SIAM JourScience (FOCS), pp. 665‚Äì674.
nal on Computing 32.1, pp. 48‚Äì77.
Lattimore, Szepesvari (2018). Bandit Algorithms. CamAuer, Peter and Chao-Kai Chiang (2016). ‚ÄúAn Algorithm
bridge University Poress.
with Nearly Optimal Pseudo-Regret for Both StochasLiu, Liu, Tianyang Li, and Constantine Caramanis (2019).
tic and Adversarial Bandits‚Äù. In: Conference on Learn‚ÄúHigh Dimensional Robust Estimation of Sparse Moding Theory, pp. 116‚Äì120.
els via Trimmed Hard Thresholding‚Äù. In: arXiv preprint.
Bai, Yang et al. (2018). ‚ÄúComparative Evaluation of Heart
Liu, Yun-En et al. (2014). ‚ÄúTrading Off Scientific KnowlRate-Based Monitors: Apple Watch vs Fitbit Charge
edge and User Learning with Multi-Armed Bandits.‚Äù
HR‚Äù. In: Journal of Sports Sciences 36.15, pp. 1734‚Äì
In: EDM, pp. 161‚Äì168.
1741.
Lykouris, Thodoris, Vahab Mirrokni, and Renato Paes Leme
Bubeck, Sebastien and Aleksandrs Slivkins (2012). ‚ÄúThe
(2018). ‚ÄúStochastic Bandits Robust to Adversarial CorBest of Both Worlds: Stochastic and Adversarial Banruptions‚Äù. In: Proceedings of the 50th Annual ACM
dits‚Äù. In: Conference on Learning Theory.
SIGACT Symposium on Theory of Computing, STOC,
Crussell, Jonathan, Ryan Stevens, and Hao Chen (2014).
pp. 114‚Äì122.
‚ÄúMAdFraud: Investigating Ad Fraud in Android ApMa, Yuzhe et al. (2019). ‚ÄúData Poisoning Attacks in Conplications‚Äù. In: Proceedings of the 12th Annual Intertextual Bandits‚Äù. In: International Conference on Denational Conference on Mobile Systems, Applications,
cision and Game Theory for Security.
and Services - MobiSys ‚Äô14. Bretton Woods, New HampNecka, Elizabeth A. et al. (2016). ‚ÄúMeasuring the Prevashire, USA: ACM Press, pp. 123‚Äì134.
lence of Problematic Respondent Behaviors among MTurk,
Curran, Paul G. (2016). ‚ÄúMethods for the detection of
Campus, and Community Participants‚Äù. In: PLOS ONE
carelessly invalid responses in survey data‚Äù. In: Jour11.6. Ed. by Jelte M. Wicherts, e0157732.
nal of Experimental Social Psychology 66, pp. 4‚Äì19.
Pearce, Paul et al. (2014). ‚ÄúCharacterizing Large-Scale
Diakonikolas, Ilias et al. (2019). ‚ÄúRobust Estimators in
Click Fraud in ZeroAccess‚Äù. In: Proceedings of the
High Dimensions without the Computational Intractabil2014 ACM SIGSAC Conference on Computer and Comity‚Äù. In: SIAM Journal on Computing 48.2, pp. 742‚Äì
munications Security - CCS ‚Äô14. Scottsdale, Arizona,
864.
USA: ACM Press, pp. 141‚Äì152.

10

Ryan, Timothy (2018). Data Contamination on MTurk ‚Äî
Timothy J. Ryan. en-US.
Seldin, Yevgeny and GaÃÅbor Lugosi (2017). ‚ÄúAn Improved
Parametrization and Analysis of the EXP3++ Algorithm for Stochastic and Adversarial Bandits‚Äù. In: pp. 1743‚Äì
1759.
Seldin, Yevgeny and Aleksandrs Slivkins (2014). ‚ÄúOne
Practical Algorithm for Both Stochastic and Adversarial Bandits.‚Äù In: ICML, pp. 1287‚Äì1295.
Williams, Joseph Jay et al. (2016). ‚ÄúAXIS: Generating
Explanations at Scale with Learnersourcing and Machine Learning‚Äù. In: Proceedings of the Third (2016)
ACM Conference on Learning @ Scale - L@S ‚Äô16.
Edinburgh, Scotland, UK: ACM Press, pp. 379‚Äì388.
Zimmert, Julian and Yevgeny Seldin (2019). ‚ÄúAn Optimal Algorithm for Stochastic and Adversarial Bandits‚Äù. In: Proceedings of Machine Learning Research.
Ed. by Kamalika Chaudhuri and Masashi Sugiyama.
Vol. 89. Proceedings of Machine Learning Research,
pp. 467‚Äì475.

11

A

Proofs

A.1

Theorem 1

Theorem 1 (Trimmed mean concentration). Let G be the set of points x1 , ...xn ‚àà R that are drawn from a œÉ-subGaussian distribution with mean ¬µ. Let Sn be a sample where an Œµ-fraction of these points are contaminated by an
adversary. For Œµ ‚â§ Œ± < 1/2, t ‚â• n we have,
|trMeanŒ± (Sn ) ‚àí ¬µ| ‚â§
r

p
4
œÉ
log(t) + 4Œ± 6 log(t)
(1 ‚àí 2Œ±)
n
with probability at least 1 ‚àí

4
t2 .

Proof of theorem 1. Without loss of generality assume ¬µ = 0 for the underlying true distribution. For X ‚àº œÉ-subGaussian, by definition, we have:


Œ∑2
P |X| ‚â• ¬µ + Œ∑ ‚â§ 2 exp(‚àí 2 )
2œÉ
r


2
2
P |xÃÑn ‚àí ¬µ| ‚â• œÉ
log
‚â§ Œ¥1
n
Œ¥1
and



t2
P max |Xi | ‚â• t ‚â§ 2n exp ‚àí 2
2œÉ
i‚àà[n]
r


2n
P max |Xi | ‚â• œÉ 2 log
‚â§ Œ¥2 .
Œ¥2
i‚àà[n]


Let GÃÉ ‚äÇ Gn represent the points which are not contaminated and C ‚äÇ Gn represent the contaminated points. Then
our sample can be represented by the union Sn = GÃÉ ‚à™ C. Let R represent the points that remain after trimming Œ±
fraction of the largest and smallest points, and T be the set of points that were trimmed. Then we have that.
X
1
x
|trMeanŒ± (Sn )| =
(1 ‚àí 2Œ±)n
x‚ààR

1
=
(1 ‚àí 2Œ±)n
‚â§

X

x+

x‚ààGÃÉ‚à©R

x

x‚ààC‚à©R

X
X
X
1
x‚àí
x+
x
(1 ‚àí 2Œ±)n
x‚ààC‚à©R
x‚ààGÃÉ
x‚ààGÃÉ‚à©T
| {z } | {z } | {z }
A1

‚â§

X

1
(1 ‚àí 2Œ±)n

 X

A3

A2

x +

X

x +



X

x

x‚ààGÃÉ

x‚ààGÃÉ‚à©T

x‚ààC‚à©R

| {z }

| {z }

| {z }

A1

A3

A2

with
A1 =

X

X

x‚àí

x‚ààGn

x‚ààGn \GÃÉ

x ‚â§

X
x‚ààGn

x +

X

x ‚â§ n|xÃÑGn | + Œµn| max xi |
i‚àà[n]

w.p. at least 1 ‚àí Œ¥1 ‚àí Œ¥2 ,

x‚ààGn \GÃÉ

A2 ‚â§ 2Œ±n max |xi |

w.p. at least 1 ‚àí Œ¥2 ,

A3 ‚â§ Œµn max |xi |

w.p. at least 1 ‚àí Œ¥2 .

i‚àà[n]

i‚àà[n]

12

Combining we get,


1
|trMeanŒ± (Sn ) ‚àí ¬µ| ‚â§
|xÃÑGn | + max |xi |(2Œµ + 2Œ±)
(1 ‚àí 2Œ±)
i‚àà[n]


1
‚â§
|xÃÑGn | + max |xi |(4Œ±)
(1 ‚àí 2Œ±)
i‚àà[n]
r
r

œÉ
2t
2
2
‚â§
log
+ 4Œ± 2 log
(1 ‚àí 2Œ±)
n
Œ¥1
Œ¥2
with probability at least 1 ‚àí Œ¥1 ‚àí Œ¥2 . Letting Œ¥1 =
|trMeanŒ± (Sn ) ‚àí ¬µ| ‚â§
with probability at least 1 ‚àí

A.2

2
t2

and Œ¥2 =

œÉ
(1 ‚àí 2Œ±)

r

2
t2 ,

and assuming Œ± ‚â• Œµ, we have,


p
4
log(t) + 4Œ± 6 log(t)
n

4
t2 .

Theorem 2

Theorem 2 (Œ±-shorth mean concentration). Let Gn be the set of points x1 , ...xn ‚àà R that are drawn from a œÉ-subGaussian distribution with mean ¬µ. Let Sn be a sample where an Œµ-fraction of these points are contaminated by an
adversary. For Œµ ‚â§ Œ± < 1/3, t ‚â• n, we have,
|sMeanŒ± (Sn ) ‚àí ¬µ| ‚â§
r
œÉ
(6Œ± ‚àí 8Œ±2 )œÉ p
4
log t +
6 log t
1 ‚àí 2Œ± n
(1 ‚àí 2Œ±)(1 ‚àí Œ±)
with probability at least 1 ‚àí

4
t2 .

Proof of theorem 2. Without loss of generality assume ¬µ = 0 for the underlying true distribution. Let X ‚àº œÉ-subGaussian.
We want to bound the impact of the contaminated points in our interval. Once we have this bound, the proof
follows just as in the trimmed mean.
Assume Œ± < 1/3 and Œµ ‚â§ Œ±. Let J be the interval that contains the shortest 1 ‚àí Œ± fraction of Sn , I be the interval
that contains GÃÉ (i.e. the remaining good points after contamination), and T be the interval that contains the points of
Sn after trimming the Œ± largest and smallest fraction of points. Use |I| to denote the length of interval I. It must be
that I ‚à© J 6= ‚àÖ because otherwise the points in I ‚à™ J would contain 2 ‚àí 3Œ± > 1 fraction of Sn . Let c be a point in
I ‚à© J and x be a point in J. Recall that trMeanŒ± (Sn ) is the trimmed mean of the contaminated sample Sn from above.
Then we have,
|x| ‚â§ |x ‚àí c| + |c ‚àí trMeanŒ± (Sn )| + |trMeanŒ± (Sn )|
‚â§ |J| + |I| + |trMeanŒ± (Sn )|
‚â§ 2|I| + |trMeanŒ± (Sn )|
The second step comes from x and c both being in J and because I ‚äá T . The third step comes from |J| ‚â§ |I|.
To bound the length of I we have,
|I| ‚â§ 2 max |x| w.p. at least 1 ‚àí Œ¥2 .
x‚ààGn

Finally, since
|trMeanŒ± (Sn )| ‚â§

1
(|xÃÑGn | + 4Œ± max |x|)
x‚ààGn
(1 ‚àí 2Œ±)
13

with probability at least 1 ‚àí Œ¥1 ‚àí Œ¥2 , we get that for x ‚àà J,
1
(|xÃÑGn | + 4Œ± max |x|)
x‚ààGn
(1 ‚àí 2Œ±)


|xÃÑGn |
4Œ±
max |x|.
=
+ 4+
1 ‚àí 2Œ±
1 ‚àí 2Œ± x‚ààGn

w.p. at least 1 ‚àí Œ¥1 ‚àí Œ¥2 ,

|x| ‚â§ 4 max |xi | +
i‚àà[n]

Now that we have a bound on the contaminated points in J, our analysis follows as before,
|sMeanŒ± (Sn )|
‚â§

1
(1 ‚àí Œ±)n

 X

X

x +

x‚ààGÃÉ

x‚ààGÃÉ‚à©¬¨J

| {z }

|

A1

{z

A2

X

x +


x

x‚ààC‚à©J

}

| {z }
A3

where
A1 ‚â§ n|xÃÑGn | + Œµn max |x|

w.p. at least 1 ‚àí Œ¥1 ‚àí Œ¥2 ,

x‚ààGn

A2 ‚â§ Œ±n max |x|

w.p. at least 1 ‚àí Œ¥2 ,

x‚ààGn

!

A3 ‚â§ Œµn


|xÃÑGn |
4Œ± 
+ 4+
max |x|
1 ‚àí 2Œ±
1 ‚àí 2Œ± x‚ààGn

w.p. at least 1 ‚àí Œ¥1 ‚àí Œ¥2 .

Combining we get,
|sMeanŒ± (Sn ) ‚àí ¬µ|


4Œ±Œµ 
Œµ 
1
|xÃÑGn | 1 +
+ max |x| 5Œµ + Œ± +
‚â§
x‚ààGn
(1 ‚àí Œ±)
1 ‚àí 2Œ±
1 ‚àí 2Œ±


2 

4Œ±
1
1‚àíŒ±
‚â§
|xÃÑGn |
+ max |x| 6Œ± +
x‚ààGn
(1 ‚àí Œ±)
1 ‚àí 2Œ±
1 ‚àí 2Œ±


2

6Œ± ‚àí 8Œ±
1
1‚àíŒ±
=
|xÃÑGn |
+ max |x|
x‚ààGn
1‚àíŒ±
1 ‚àí 2Œ±
1 ‚àí 2Œ±
r
r
2
œÉ
2
2
2t
6Œ± ‚àí 8Œ± œÉ
‚â§
log
2 log
+
1 ‚àí 2Œ± n
Œ¥1
(1 ‚àí 2Œ±)(1 ‚àí Œ±)
Œ¥2
With probability at least 1 ‚àí Œ¥1 ‚àí Œ¥2 . Letting Œ¥1 =

2
t2

and Œ¥2 =

2
t2 ,

and assuming Œ± ‚â• Œµ, we have,

|sMeanŒ± (Sn ) ‚àí ¬µ|
‚â§
With probability at least 1 ‚àí

A.3

œÉ
1 ‚àí 2Œ±

r

4
6Œ± ‚àí 8Œ±2 œÉ p
log t +
6 log t
n
(1 ‚àí 2Œ±)(1 ‚àí Œ±)

4
t2 .

Theorem 3

Theorem 3 (Œ±-trimmed mean crUCB uncontaminated regret). Let K > 1 and T ‚â• K ‚àí 1. Then with algorithm
4 with the Œ±-trimmed mean, œÉ-sub-Gaussian reward distributions with œÉa ‚â§ œÉ0 , and contamination rate Œµ ‚â§ Œ± ‚â§
‚àÜmin‚àö
, we have the uncontaminated regret bound,
4(‚àÜ
+4œÉ 6 log T )
min

0

RÃÑ(U CB) ‚â§ 8œÉ0

p

KT log T +
14

X

15‚àÜa .

Proof of theorem 3. First will show that E[Na (t)] < ‚àû for non-optimal actions. Assume Na (t) ‚â•

s


p
4
log t + 4Œ± 6 log(t)
Na (t)
s

p
œÉi + œÉ0
4
‚â§ ¬µa +
log t + 4Œ± 6 log(t)
(1 ‚àí 2Œ±)
Na (t)
s

p
2œÉ0
4
‚àó
‚â§ ¬µ ‚àí ‚àÜa +
log t + 4Œ± 6 log(t)
(1 ‚àí 2Œ±)
Na (t)

œÉ0
¬µÃÇa +
(1 ‚àí 2Œ±)

‚â§ ¬µ‚àó ‚àí ‚àÜa +

2œÉ0 4Œ± p
‚àÜa
+
6 log t
2(1 ‚àí 2Œ±) (1 ‚àí 2Œ±)

‚â§ ¬µ‚àó

w.p. at least 1 ‚àí

4
t2

64œÉ02 log(T )
‚àÜ2a
‚àÜa
p
Œ±‚â§
4(‚àÜa + 4œÉ0 6 log(t))

Na (t) ‚â•

s


p
4
6
log(t)
log
t
+
4Œ±
N ‚àó (t)
s


p
4
œÉ0
‚àó
log t + 4Œ± 6 log(t) .
‚â§ ¬µÃÇ +
(1 ‚àí 2Œ±)
N ‚àó (t)
œÉ i‚àó
‚â§ ¬µÃÇ +
(1 ‚àí 2Œ±)
‚àó

64œÉ02 log(T )
.
‚àÜ2a

w.p. at least 1 ‚àí

4
t2

Now to find E[Na (T )] for non-optimal actions.

 X

T
E[Na (T )] = 1 + E
1{At = a}
t=K+1

 X




T
64œÉ02 log(T )
64œÉ02 log(T )
=1+E
1 At = a, Na (t) ‚â§
+ 1 At = a, Na (t) >
‚àÜ2a
‚àÜ2a
t=K+1



T
X
64œÉ02 log(T )
64œÉ02 log(T )
+
P At = a, Na (t) >
‚â§1+
‚àÜ2a
‚àÜ2a
t=K+1


 

T
X
log(T )
64œÉ02 log(T )
64œÉ02 log(T )
+
P At = a|Na (t) >
P Na (t) >
‚àÜ2a
‚àÜ2a
‚àÜ2a

=1+

64œÉ02

‚â§1+

64œÉ02

t=K+1

T
X
log(T )
8
+
‚àÜ2a
t2
t=K+1

64œÉ02 log(T )
‚â§
+ 15.
‚àÜ2a

Finally, we can find the regret following the standard analysis,
15

RÃÑ =

K
X

‚àÜa E[Na (T )]

a=2

=

X

‚àÜa E[Na (T )] +

X



‚àÜa E Na (T )

‚àÜa ‚â•‚àÜ

‚àÜa <‚àÜ

X  64œÉ 2 log(T )

0
‚â§ ‚àÜT +
+ 15‚àÜa
‚àÜa

E[Na (t)] ‚â§

‚àÜa ‚â•‚àÜ

r
X
p
‚â§ 8œÉ0 KT log(T ) +
15‚àÜa

A.4

‚àÜ=

64œÉ02 log(T )
+ 15
‚àÜa

64KœÉ02 log(T )
.
T

Corollary 1

Corollary 1 (Œ±-trimmed mean crUCB uncontaminated regret bounded rewards). If the rewards are bounded by b, and
min
have contamination rate Œµ ‚â§ Œ± ‚â§ 4(‚àÜ‚àÜmin
+4b) , then
RÃÑT ‚â§ 8œÉ0

p

KT log(T ) +

X

15‚àÜa .

Proof of corollary 1. By replacing the part of the concentration bound for the trimmed mean that is based on the
maximum value in the sample with b, we get that,
r
œÉ
4
4Œ±
|trMeanŒ± (Sn ) ‚àí ¬µ| ‚â§
log(t) +
b
(1 ‚àí 2Œ±) n
1 ‚àí 2Œ±
with probability at least 1 ‚àí

4
t2 .

First will show that E[Na (t)] < ‚àû for non-optimal actions. Assume Na (t) ‚â•
œÉ0
¬µÃÇa +
(1 ‚àí 2Œ±)

s

4
4Œ±
log t +
b
Na (t)
1 ‚àí 2Œ±
s
œÉi + œÉ0
4
8Œ±
‚â§ ¬µa +
log t +
b
(1 ‚àí 2Œ±) Na (t)
1 ‚àí 2Œ±
s
4
8Œ±
2œÉ
0
‚â§ ¬µ‚àó ‚àí ‚àÜa +
log t +
b
(1 ‚àí 2Œ±) Na (t)
1 ‚àí 2Œ±
‚â§ ¬µ‚àó ‚àí ‚àÜa +

œÉ i‚àó
‚â§ ¬µÃÇ +
(1 ‚àí 2Œ±)

s

œÉ0
‚â§ ¬µÃÇ +
(1 ‚àí 2Œ±)

s

‚àó

4
N ‚àó (t)

log t +

w.p. at least 1 ‚àí

4
t2

64œÉ02 log(T )
‚àÜ2a
‚àÜa
Œ±‚â§
4(‚àÜa + 4b)

‚àÜa
8Œ±
+
b
2(1 ‚àí 2Œ±) (1 ‚àí 2Œ±)

Na (t) ‚â•

‚â§ ¬µ‚àó

‚àó

64œÉ02 log(T )
.
‚àÜ2a

4Œ±
b
1 ‚àí 2Œ±

4
4Œ±
log t +
b.
N ‚àó (t)
1 ‚àí 2Œ±

Results follow with a similar analysis as above.
16

w.p. at least 1 ‚àí

4
t2

A.5

Theorem 4

Theorem 4 (Œ±-shorth mean crUCB uncontaminated regret). Let K > 1 and T ‚â• K ‚àí 1. Then with algorithm
4 with the Œ±-shorth mean, sub-Gaussian reward distributions with œÉa ‚â§ œÉ0 , and contamination rate Œµ ‚â§ Œ± ‚â§
‚àÜmin‚àö
, we have the uncontaminated regret bound,
4(‚àÜmin +9œÉ0 6 log T )
X
p
RÃÑ(U CB) ‚â§ 8œÉ0 KT log T +
15‚àÜa .
Proof of theorem 4. The proof for the contamination robust UCB using the Œ±-shorth mean is similar to that of the
trimmed mean.
s

4
(6Œ± ‚àí 8Œ±2 )œÉ p
6 log t
log t +
Na (t)
(1 ‚àí 2Œ±)(1 ‚àí Œ±)
s
2œÉ0
4
(6Œ± ‚àí 8Œ±2 )œÉ0 p
‚àó
‚â§ ¬µ ‚àí ‚àÜa +
log t
log t + 2
1 ‚àí 2Œ± Na (t)
(1 ‚àí 2Œ±)(1 ‚àí Œ±)

œÉ0
¬µÃÇa +
1 ‚àí 2Œ±

‚â§ ¬µ‚àó ‚àí ‚àÜa +

Na (t) ‚â•

‚â§ ¬µ‚àó
s

4
t2

64œÉ02 log(t)
, Œ± < 1/3
‚àÜ2a
‚àÜa
‚àö
Œ±‚â§
4(‚àÜa + 9œÉ0 6 log t)

18Œ±œÉ0 p
‚àÜa
+
6 log t
2(1 ‚àí 2Œ±) (1 ‚àí 2Œ±)

œÉ0
‚â§ ¬µÃÇ‚àó +
1 ‚àí 2Œ±

w.p.a.l 1 ‚àí

4
6Œ± ‚àí 8Œ±2 œÉ p
log
t
+
6 log t
N ‚àó (t)
(1 ‚àí 2Œ±)(1 ‚àí Œ±)

Using the analysis from the trimmed mean regret, we again get,
E[Na (t)] ‚â§

64œÉ02 log T X
+
15‚àÜa
‚àÜa

Using this value and standard regret analysis yields
X
p
15‚àÜa .
RÃÑT ‚â§ 8œÉ0 KT log(T ) +

A.6

Corollary 2

Corollary 2 (Œ±-shorth mean crUCB uncontaminated regret bounded rewards). If the rewards are bounded by b, and
min
have contamination rate Œµ ‚â§ Œ± ‚â§ 4(‚àÜ‚àÜmin
+9b) , then
X
p
RÃÑT ‚â§ 8œÉ0 KT log(T ) +
15‚àÜa .
Proof of corollary 2. By replacing the part of the concentration bound for the trimmed mean that is based on the
maximum value in the sample with b, we get that,
œÉ
|sMeanŒ± (Sn ) ‚àí ¬µ| ‚â§
1 ‚àí 2Œ±

r

6Œ± ‚àí 8Œ±2
4
log t +
b
n
(1 ‚àí 2Œ±)(1 ‚àí Œ±)

With probability at least 1 ‚àí t42 .
Follow similar analysis as in appendix A.4 but setting constraint to be,
Œµ‚â§Œ±‚â§

‚àÜmin
4(‚àÜmin + 9b)

17

B

Relationship of Œµ and ‚àÜmin

One quick example showing that Œµ > ‚àÜmin can prohibit sublinear regret is to consider the CSB game with two actions
and Bernoulli rewards. If a1 ‚àº B(p) and a2 ‚àº B(p ‚àí Œµ) then an adversary can choose all the contaminated rewards
for a2 to be 1 making it appear that a2 ‚àº B(p). Thus the actions are indistinguishable to the learner.
However, we can still provide a bound for larger values of Œµ provided one is willing to tolerate a linear term in
the regret. We outline the argument only for the trimmed mean case since the argument for the shorth mean is very
similar. Note that argument for bounding E[Na (T )] in Theorem 3 works under the condition
Œ±‚â§

‚àÜa
p

4(‚àÜa + 4œÉ0

6 log(T ))

.

Let S be the set of actions satisfying this condition. The arguments in the proof of Theorem 3 show that
X
X
p
‚àÜa E[Na (T )] ‚â§ 8œÉ0 KT log(T ) +
15‚àÜa .
a>1,a‚ààS

a>1,a‚ààS

‚àö
Therefore the bound of OÃÉ(œÉ0 KT ) holds only for the regret due to actions a ‚àà S. For any action a ‚àà
/ S, we have
p
16Œ±œÉ0 6 log(T )
‚àÜa <
1 ‚àí 4Œ±
assuming Œ± < 0.25. The total regret contribution for a ‚àà
/ S is therefore
p
X
16Œ±œÉ0 6 log(T ) X
E[Na (T )]
‚àÜa E[Na (T )] ‚â§
1 ‚àí 4Œ±
a>1,a‚ààS
/
a>1,a‚ààS
/
p
16Œ±œÉ0 6 log(T )
T
‚â§
1 ‚àí 4Œ±
‚àö
So the total regret is OÃÉ( KT +

Œ±
1‚àí4Œ± T ).

18

